{"version":3,"sources":["player.js"],"names":["cc","Class","extends","Component","properties","readJumpAudio","type","AudioClip","default","jumpAudio","onLoad","usersprite","find","node","readJumpAudioID","rotateNode","JumpAudioID","isReadJump","direction","power","speed","distance","proportion","start","readJump","audioEngine","play","runAction","scaleTo","jumpToBlock","targetPos","callback","stop","jumpAudioID","stopAllActions","resetAction","jumpAction","jumpTo","roatteAction","rotateBy","finishFunc","callFunc","rotation","Math","random","sequence","update","dt","onJump","v2","x","y"],"mappings":"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","file":"player.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       readJumpAudio:{\r\n           type:cc.AudioClip,\r\n           default:null,\r\n       },jumpAudio:{\r\n            type:cc.AudioClip,\r\n            default:null,\r\n       }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.usersprite = cc.find(\"rotateNode/user\",this.node,false,1);\r\n        this.readJumpAudioID = -1;\r\n\r\n        this.rotateNode = cc.find(\"rotateNode\",this.node);\r\n        this.JumpAudioID = -1;\r\n\r\n        this.isReadJump = false;\r\n        //定义旋转方向\r\n        this.direction =1; //1 顺时针， -1 逆时针\r\n\r\n        this.power = 120;\r\n\r\n        this.speed = 200;\r\n\r\n        this.distance = 0;//距离\r\n\r\n        this.proportion = 0.55;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    readJump:function(){\r\n        this.isReadJump = true;\r\n        this.readJumpAudioID = cc.audioEngine.play(this.readJumpAudio);\r\n\r\n        this.usersprite.runAction(cc.scaleTo(1.5,1,0.5));\r\n    },\r\n    jumpToBlock:function(targetPos,callback){\r\n        cc.audioEngine.stop(this.readJumpAudio);\r\n        this.jumpAudioID =  cc.audioEngine.play(this.jumpAudio,false,1);\r\n        this.usersprite.stopAllActions();\r\n        let resetAction = cc.scaleTo(1,1,1);\r\n        let jumpAction = cc.jumpTo(0.5,targetPos,158,1);\r\n        let roatteAction = cc.rotateBy(0.5,this.direction*360);\r\n        let finishFunc = cc.callFunc(()=>{\r\n            this.rotateNode.rotation = 0;\r\n            this.direction = Math.random() < 0.5?1:-1;\r\n            this.distance = 0;\r\n            this.speed = 0;\r\n            callback();//调用回调函数  \r\n        });\r\n        this.usersprite.runAction(resetAction);\r\n        this.rotateNode.runAction(roatteAction);\r\n        this.node.runAction(cc.sequence(jumpAction,finishFunc));\r\n    },\r\n    update(dt){\r\n        if(this.isReadJump){\r\n            //计算距离\r\n            this.speed +=dt* this.power;\r\n\r\n            this.distance = this.speed + 600* dt;\r\n\r\n        }\r\n    },\r\n    onJump:function(callback){\r\n        let targetPos = cc.v2(this.node.x+this.distance*this.direction,\r\n            this.node.y + this.distance* this.proportion);\r\n        this.jumpToBlock(targetPos,callback);\r\n    }\r\n\r\n});\r\n"]}